(()=>{function a(i){return i?new Function(`return {${i}}`)():null}function l(i,t){for(let e in i)if(i.hasOwnProperty(e)){if(typeof i[e]=="object"&&i[e]!==null&&t[e]){if(!l(i[e],t[e]))return!1}else if(i[e]!==t[e])return!1}return!0}function c(i,t,...e){if(!i)return;let n=window,s=i.split(".");for(let r of s)if(n=n&&n[r],n instanceof Function)return n.bind(t)(...e)}class o extends HTMLFormElement{constructor(){super(),this._lastCalled=0,this._interval=+(this.dataset.debounce||0),this._match=a(this.dataset.match),this._notMatch=a(this.dataset.matchNot);let t=this.dataset.targetEl;t&&(this.el=document.querySelector(t))}connectedCallback(){let t=this.dataset.event;t&&(this.el??document).addEventListener(t,this)}disconnectedCallback(){let t=this.dataset.event;t&&(this.el??document).removeEventListener(t,this)}handleEvent(t){if(t&&(this._match&&!l(this._match,t)||this._notMatch&&l(this._notMatch,t)))return;let e=this._interval;if(e&&this._lastCalled+e>Date.now()){this._lastCalled=Date.now(),this._id&&clearTimeout(this._id),this._id=setTimeout(()=>this.handleEvent(t),e);return}this._lastCalled=Date.now();let n=this.dataset.call,s=this.dataset.action;n?c(n,this,t):s?(this._action||(this._action=new Function("event",s).bind(this)),this._action(t)):this.requestSubmit()}}customElements.define("form-subscribe",o,{extends:"form"});})();
